<section class="content-wrapper">
      <passwordprotectmodal [currViewfooid]="viewfoopasswordid" (onchangeviewfoo)="changeinviewfoolist($event)"></passwordprotectmodal>
        <selfdestructmodal [currViewfooid]="viewfooselfdestructid"></selfdestructmodal>
  <div class="header-bottombelt navbar-fixed-top" style="position: fixed; top: 72px;">
    <div class="container-fluid">
      <div class="row">
         
        <div class="bread-crumbsbelt breadcrumb-default">
          <div class="build-btnbox">
            <button data-toggle="dropdown" class="btn btn-default dropdown-toggle add-image" type="button" aria-expanded="false">
              <i class="icon-imgadd"></i>
              <span>Add image container &nbsp;
                <span class="caret"></span>
              </span>
            </button>
            <ul role="menu" class="dropdown-menu img-container">
              <li class="thumb">
                <a href="javascript:void(0)" (click)="containerCreate('image')">
                  <i class=""></i>Image container
                </a>
              </li>
              <li class="gallery">
                <a href="javascript:void(0)" (click)="containerCreate('gallery')">
                  <i class=""></i>Gallery container
                </a>
              </li>
              <li class="carousel">
                <a href="javascript:void(0)" (click)="containerCreate('carousel')">
                  <i class=""></i>Carousel container
                </a>
              </li>
              <li class="massonary">
                <a href="javascript:void(0)" (click)="containerCreate('massonary')">
                  <i class=""></i>Massonary container
                </a>
              </li>

            </ul>
           <!-- <div class="save">
              <a href="javascript:void(0)" class="btn btn-default">
                <i class=""></i>Save</a>
            </div>-->
            <div class="delete">
              <a href="javascript:void(0);" class="btn btn-default" (click)="deleteviewfoo()">
                <i class="" *ngIf="!currentViewfoo.deleting"></i>
                <i *ngIf="currentViewfoo.deleting" class='fa-spin'></i> Delete
              </a>
            </div>
          </div>

          <div class="choose-temp">

            <span></span>
            <div class="brc-default">
              <ul>
                <li>
                  <div class="brc-title">
                    <a href="javascript:void(0);" (click)="selecttemplate()">
                      <span>1</span>
                    </a>
                    <h6>Choose template</h6>
                  </div>
                </li>
                <li>
                  <div class="brc-title">
                    <span class="active">2</span>
                    <h6>Build ViewFoo</h6>
                  </div>
                </li>
                <li>
                  <div class="brc-title">
                    <span>3</span>
                    <h6>Publish</h6>
                  </div>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="invalid" class="text text-danger">{{msg}}</div>
  <div class="container select-template">
    <div class="row">
      <div class="sidebar-block">
        <div id="sidebar">
          <!--<ul class="setting-title">
            <li>
              <label>Viewer settings</label>
              <a href="javascript:void(0)" class="acitve">
                <i class="save"></i>
              </a>
            </li>
          </ul>-->
          <ul class="allow-sharing">
            <li>Allow sharing
              <div class="sharing-switch">
                <input id="cmn-toggle-1" #cbsharing class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setsharing" (change)="allowsharing(cbsharing.checked)"
                />
                <label for="cmn-toggle-1"></label>
              </div>
            </li>
            <li>Allow comments
              <div class="sharing-switch">
                <input id="cmn-toggle-2" #cbcomment class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setcomment" (change)="allowcomment(cbcomment.checked)"
                />
                <label for="cmn-toggle-2"></label>
              </div>
            </li>
            <li>Allow selections
              <div class="sharing-switch">
                <input id="cmn-toggle-3" #cbselection class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setselection" (change)="allowselection(cbselection.checked)"
                />
                <label for="cmn-toggle-3"></label>
              </div>
            </li>
          </ul>
          <ul class="image-size">
            <li>
              <span>Image size</span>
              <div class="checkbox">
                <label>
                  <input type="checkbox" class="CBimagesize" #sizenormal value="normal" [(ngModel)]="currentnormalsize" (change)="changeimagesize(sizenormal.value)">
                  <span class="cr">
                    <i class="cr-icon glyphicon glyphicon-ok"></i>
                  </span> Normal
                </label>
                <label>
                  <input type="checkbox" class="CBimagesize" #sizeHR value="Hi-Res" [(ngModel)]="currenthiressize" (change)="changeimagesize(sizeHR.value)">
                  <span class="cr">
                    <i class="cr-icon glyphicon glyphicon-ok"></i>
                  </span> Hi-Res
                </label>
              </div>
            </li>
          </ul>
          
          <ul class="allow-sharing">
            <li>Show image data mousehover
              <div class="sharing-switch">
                <input id="cmn-toggle-4" #cbmousehoverval class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setmousehover"
                  (change)="changemousehover(cbmousehoverval.checked)">
                <label for="cmn-toggle-4"></label>
              </div>
            </li>
            <li>Image info frame
              <div class="sharing-switch">
                <input id="cmn-toggle-5" #cbframeval class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setimageinfoframe"
                  (change)="changeframe(cbframeval.checked)">
                <label for="cmn-toggle-5"></label>
              </div>
            </li>
            <li>Apply Watermark
              <div class="sharing-switch">
                <input id="cmn-toggle-6" #cbwmval class="cmn-toggle cmn-toggle-round" type="checkbox" [(ngModel)]="setapplywatermark"
                  (change)="changeApplyWatermark(cbwmval.checked)">
                <label for="cmn-toggle-6"></label>
              </div>
            </li>
            <li style="border-bottom:1px solid #dbdbdb;">Image default numbering
              <div class="sharing-switch">
                <input type="text" #imgnum class="info-frame" placeholder="001" [(ngModel)]="currentViewfoo.imagedefaultno" (blur)="imagedefaultnoFun(imgnum.value)">
              </div>
            </li>
          </ul>
          <ul class="setting-destruct" >
              <a href="javascript:void(0)" title="unlock" (click)="openselfdestructpopup(currentViewfoo.id)">
                  <li *ngIf="currentViewfoo.isselfdestructdate=='false'">
                      <label>Self Destruct</label>
                      <i class="fa fa-bomb fa-2x destruct" aria-hidden="true"></i>
                  </li>
              </a>
              <a href="javascript:void(0)" title="unlock" (click)="openpasswordpopup(currentViewfoo.id)">
                  <li *ngIf="currentViewfoo.viewfootype=='private'">
                      <label>Password Protect</label>
                      <!--<a href="javascript:void(0)">
                      </a>-->
                      <!--<i class="fa fa-unlock-alt" aria-hidden="true"></i>-->
                      <i class="fa fa-shield fa-2x protect" aria-hidden="true"></i>
                  </li>
              </a>
          </ul>

         <!-- <ul class="viewfoo-bg">
            <li>
              <span>Color options</span>
              <div class="select-bg">
                <p>Background color</p>
                <div class="pick-color">
                  <ul>
                    <!-- <li><a class="white" href="javascript:void(0)" (click)="changebgcolor('white')"></a></li>
                                         <li><a class="black" href="javascript:void(0)" (click)="changebgcolor('black')"></a></li>-->
                   <!-- <li>
                      <a href="#">
                        <input id="radio1" type="radio" checked="checked" value="1" name="radio1" class="white" (click)="changebgcolor('white')">
                        <label for="radio1"></label>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <input id="radio2" type="radio" value="2" name="radio1" class="black" (click)="changebgcolor('black')">
                        <label for="radio2"></label>
                      </a>
                    </li>
                    <li>
                      <a class="controlset">
                        <input class="jscolor" type="text" value="#000000" name="color10" id="color6" placeholder="" (change)="changebgcolor('color6')">
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="select-bg">
                <p>Menu font color</p>
                <div class="pick-color">
                  <ul>
                    <!-- <li><a class="white" href="javascript:void(0)" (click)="changefontcolor('white')"></a></li>
                                         <li><a class="black" href="javascript:void(0)" (click)="changefontcolor('black')"></a></li>-->
                   <!-- <li>
                      <a href="#">
                        <input id="radio3" type="radio" value="3" name="radio2" class="white" checked (click)="changefontcolor('white')">
                        <label for="radio3"></label>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <input id="radio4" type="radio" value="4" name="radio2" class="black" (click)="changefontcolor('black')">
                        <label for="radio4"></label>
                      </a>
                    </li>
                    <li>
                      <a class="controlset">
                        <input class="jscolor" type="text" value="#000000" name="color10" id="color7" placeholder="" (change)="changefontcolor('color7')">
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
              <div class="select-bg">
                <p>Menu background color</p>
                <div class="pick-color">
                  <ul>
                    <!-- <li><a class="white" href="javascript:void(0)" (click)="changemenubgcolor('white')"></a></li>
                                         <li><a class="black" href="javascript:void(0)" (click)="changemenubgcolor('black')"></a></li> -->
                <!--    <li>
                      <a href="#">
                        <input id="radio5" type="radio" value="5" name="radio3" class="white" checked (click)="changemenubgcolor('white')">
                        <label for="radio5"></label>
                      </a>
                    </li>
                    <li>
                      <a href="#">
                        <input id="radio6" type="radio" value="6" name="radio3" class="black" (click)="changemenubgcolor('black')">
                        <label for="radio6"></label>
                      </a>
                    </li>
                    <li>
                      <a class="controlset">
                        <input class="jscolor" type="text" value="#000000" name="color10" id="color8" placeholder="" (change)="changemenubgcolor('color8')">
                      </a>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
          </ul>-->
          <div class="watermark-btn">
            <!-- <a href="javascript:void(0)" class="btn btn-default">Add image watermark</a> -->
            <img [src]="imagewatermark" id="imgWatermark">
            <div [class.hidden]="!inputfile">
              <input type="file" id="imagewatermark" name="imagewatermark" (change)="fileChangeWatermark($event)">
            </div>
            <label for="imagewatermark" id="imagewatermarkLabel" class="btn btn-default">
              <i class='fa fa-upload' [class.fa-spin]="uploadingWatermark"></i> Add image watermark
            </label>
            <p>Optional</p>
          </div>

        </div>
        <div class="main-content">
          <a href="javascript:void(0)" data-toggle=".sidebar-block" id="sidebar-toggle">
            <i class=""></i>
          </a>
        </div>
      </div>
        
      <div *ngIf="loading" style="margin: 150px auto; width: 50px;">
        <i class='fa fa-spinner fa-spin'></i>
      </div>
      <div *ngIf="!loading && !currentViewfoo.containers.length" class="text-center" style="margin: 150px;">
        <h5>Please add container to start adding images.</h5>
      </div>

      <div style="background-color: transparent;margin:100px auto 15px auto;" class="gridHolder">
        <div class="grid" [ngGrid]="ngGridOptions" (onItemChange)="updateItems($event)">
           
          <div class="grid-item" *ngFor="let container of currentViewfoo.containers; let i=index" [class.fadeOut]="container.deleted"
            [ngGridItem]="container.ngGridItemOptions">

            <gallarysingle [container]="container" [currentViewfoo]="currentViewfoo" 
             [ngGridItemEvent]="container.ngGridItemEvent" *ngIf="container.containertype == 'gallery'"
              (onContainerDelete)="deletecontainer($event, i)" (onContainerUpdate)="updatecontainer($event)"></gallarysingle>

            <carouselsingle [container]="container" [currentViewfoo]="currentViewfoo" [ngGridItemEvent]="container.ngGridItemEvent" *ngIf="container.containertype != 'gallery'"
              (onContainerDelete)="deletecontainer($event, i)" (onContainerUpdate)="updatecontainer($event)"></carouselsingle>

          </div>
        </div>
      </div>

      <div class="gallery-btn-box">
        <!-- data-toggle="modal" data-target="#myPublishModal" -->
        <button type="button" class="btn btn-primary publish-btn" (click)="onPublishViewfoo()">
          Ready to publish
        </button>
      </div>

      <div class="publish-popup">
        <div class="modal fade" id="myPublishModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
          <div class="publish-block">
            <div class="publish-ur-viewfoo">
              <h3>Publish your ViewFoo</h3>
              <div class="for-public">
                <a href="javascript:void(0)" id="publicbtn" class="btn btn-default" (click)="publishviewfoopopup('public')">
                  <i class="public"></i>Public</a>
                <p>Available on your site to
                  <br> anyone online</p>
              </div>
              <div class="for-private">
                <a href="javascript:void(0)" id="privatebtn" class="btn btn-default" (click)="publishviewfoopopup('private')">
                  <i class="private"></i>Private</a>
                <p>You control who sees
                  <br>your ViewFoo</p>
              </div>
              <button type="button" class="close-btn" data-dismiss="modal" aria-label="Close">
                <i class="fa fa-times-circle" aria-hidden="true"></i>
              </button>
            </div>
            <div class="article ac-large toggle-private">
              <div class="cover-img-block">
                <form id="frmBrowse">
                  <p>Use this cover image or upload another one:</p>
                  <div id="coverWrapper" class="coverwrapper">
                    <img src="{{filename}}" class="coverimg">
                  </div>
                  <div [class.hidden]="!inputfile">
                    <input type="file" id="coverInput" name="avatar_file">
                  </div>
                  <label for="coverInput" id="coverUpload" class="btn btn-default">
                    <i class="fa fa-upload" [class.fa-spin]="uploadingCroperImage"></i> Upload
                  </label>
                  <button class="btn btn-default" id="coverCancel">Cancel</button>
                  <button class="btn btn-default" id="coverDone" (click)="oncroppopupdone()">Done</button>
                </form>
              </div>
              <div class="publish-form" *ngIf="currentViewfoo">
                <form #heroForm="ngForm" (ngSubmit)="publishviewfoo()">
                  <div style="margin-bottom: 15px;">
                    <input type="text" required placeholder="Enter title for this ViewFoo" name="viewfootitle" [(ngModel)]="currentViewfoo.viewfootitle"
                      #viewfootitle="ngModel" style="margin-bottom: 0px;">

                    <div [hidden]="viewfootitle.valid || viewfootitle.pristine" class="text text-danger pull-right">
                      Viewfoo title is required
                    </div>
                  </div>

                  <div style="margin-bottom: 15px;">
                    <label>Type and enter to add tag</label>
                    <input type="text" required placeholder="Enter tags for this ViewFoo" name="viewfootags" [(ngModel)]="currentViewfoo.tags"
                      #viewfootags="ngModel" style="margin-bottom: 0px;">

                    <div [hidden]="viewfootags.valid || viewfootags.pristine" class="text text-danger pull-right">
                      Viewfoo tags is required
                    </div>
                  </div>

                  <div class="public-setting">
                    <div class="form-group" style="margin-bottom: 30px;">
                      <label>{{strSelectFolderType}}</label>
                      <select class="selectpicker form-control edit_box" name="viewfoofolder" required [(ngModel)]="currentFolder.id" #viewfoofolder="ngModel">

                        <option value="" selected>Select your Folder</option>
                        <option *ngFor="let fl of folderForSelect" [value]='fl.folderid'>
                          {{fl.foldername}}
                        </option>
                      </select>
                      <span class="caret"></span>
                      <div [hidden]="viewfoofolder.valid || viewfoofolder.pristine" class="text text-danger pull-right">
                        Viewfoo folder selection is required
                      </div>
                    </div>
                    <h3 style="clear:both;">
                      <center>OR</center>
                    </h3>
                    <div class="blue-btn">
                      <a href="javascript:void(0)" class="btn btn-defautl" (click)="showAddFolderRow(true, false)">
                        <i class=""></i>Add new folder
                      </a>
                      <a href="javascript:void(0)" class="btn btn-defautl" (click)="showAddFolderRow(false, true)">
                        <i class=""></i>Add new sub folder
                      </a>
                    </div>
                    <div class="publicfolderinput" [class.subfolder]="isSubFolder" *ngIf="isFolder || isSubFolder">
                      <div class="newfolderselect">
                        <select id="newpublicselect" name="newpublicselect" [(ngModel)]="parentfolderid">
                          <option value="" disabled selected>Select your Folder</option>
                          <option *ngFor="let pfl of parentFolders" value='{{pfl.id}}'>
                            {{pfl.foldername| substr}}</option>
                        </select>
                        <span class="caret"></span>
                      </div>
                      <div class="subfolderinput">
                        <!-- [disabled]="sublimit" -->
                        <input type="text" [(ngModel)]="foldername" placeholder="Enter folder name" id="input-one" name="input-one-name">
                      </div>
                      <a href="javascript:void(0)" (click)="createFolder()">
                        <i *ngIf!="folderloading" class="fa fa-save"></i>
                        <i *ngIf!="!folderloading" class='fa fa-spinner fa-spin'></i>
                      </a>
                      <a href="javascript:void(0)" (click)="showAddFolderRow(false, false)">
                        <i class="fa fa-times"></i>
                      </a>
                    </div>

                  </div>

                  <button class="btn btn-defautl publish-viewfoo" type="submit" [disabled]="!heroForm.form.valid">Publish ViewFoo
                    <i *ngIf="loading" class="fa fa-spinner fa-spin"></i>
                  </button>
                  <!-- <a href="javascript:void(0)" class="btn btn-defautl publish-viewfoo">
                    <i class=""></i>Publish ViewFoo
                  </a> -->
                </form>
              </div>
            </div>
          </div>
        </div>

        <button type="button" class="close-btn" data-dismiss="modal" aria-label="Close">
          <i class="fa fa-times-circle" aria-hidden="true"></i>
        </button>
      </div>
    </div>
  </div>

</section>


